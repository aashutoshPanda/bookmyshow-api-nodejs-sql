CREATE TABLE movie (
  id INT NOT NULL AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE cinema (
  id INT NOT NULL AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE hall (
  id INT NOT NULL AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL,
  cinema_id INT NOT NULL,
  FOREIGN KEY (cinema_id) REFERENCES cinema (id),
  PRIMARY KEY (id)
);

CREATE TABLE audioSystem (
  id INT NOT NULL AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL,
  PRIMARY KEY (id)
);

CREATE TABLE showEvent (
  id INT NOT NULL AUTO_INCREMENT,
  showtime TIMESTAMP NOT NULL,
  dimension ENUM('2D', '3D', '4D', '3D-IMAX', '4D-IMAX') NOT NULL DEFAULT '2D',
  language VARCHAR(20),
  audio_system_id INT NOT NULL,
  cinema_id INT NOT NULL,
  movie_id INT NOT NULL,
  FOREIGN KEY (audio_system_id) REFERENCES audioSystem (id),
  FOREIGN KEY (cinema_id) REFERENCES cinema (id),
  FOREIGN KEY (movie_id) REFERENCES movie (id),
  PRIMARY KEY (id)
);



INSERT INTO movie (name) VALUES ('Movie A'),('Movie B'), ('Movie C');
INSERT INTO cinema (name) VALUES ('Cinema A'),('Cinema B'), ('Cinema C');
INSERT INTO hall (name, cinema_id) VALUES ('Hall 1', 1),('Hall 2', 1), ('Hall 1', 2);
INSERT INTO audioSystem (name) VALUES ('Audio-System A'),('Audio-System B'), ('Audio-System C');


INSERT INTO showEvent (showtime, dimension, language, audio_system_id, cinema_id, movie_id)
VALUES ('2023-05-20 15:00:00', '2D', 'English', 1, 1, 1),
       ('2023-05-20 18:00:00', '3D', 'English', 2, 1, 2),
       ('2023-05-21 16:30:00', '4D', 'Spanish', 1, 2, 1),
       ('2023-05-21 19:00:00', '3D-IMAX', 'English', 3, 3, 3);
       

SELECT showtime, movie.name as movie, cinema.name as cinema, audioSystem.name as audioSystem 
	from showEvent inner join audioSystem on showEvent.audio_system_id = audioSystem.id
    inner join cinema on showEvent.cinema_id = cinema.id
    inner join movie on showEvent.movie_id = movie.id
    WHERE DATE(showEvent.showtime) = '2023-05-20';
    
        


INSERT INTO Halls (name, max_seats, CinemaId) VALUES ('AUDI 1', 30, 1),('AUDI 2', 30, 1), ('AUDI 3', 30, 1);


SELECT s.id, m.name as Movie, s.dimension as Dimension, s.language as Language, a.name as Audio, s.startTIme as TIME, h.name as Hall, c.name as Cinema from Shows s 
INNER JOIN Halls h ON s.HallId=h.id 
INNER JOIN Movies m ON s.MovieId=m.id 
INNER JOIN Cinemas c ON c.id=h.CinemaId
INNER JOIN AudioSystems a ON s.AudioSystemId=a.id;